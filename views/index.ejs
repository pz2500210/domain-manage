<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>域名管理系统</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        html, body {
            height: 100%;
            overflow-y: auto;
        }
        .domain-panel {
            margin-bottom: 20px;
            border: 1px solid #dee2e6;
            border-radius: 0.25rem;
        }
        .domain-header {
            background-color: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
            padding: 10px 15px;
        }
        .domain-body {
            padding: 15px;
        }
        .status-badge {
            font-size: 0.85em;
            padding: 0.35em 0.65em;
        }
        .function-panel {
            border: 1px solid #dee2e6;
            border-radius: 0.25rem;
            margin-bottom: 10px;
            background-color: #ffffff;
        }
        .function-header {
            background-color: #f0f0f0;
            padding: 8px 15px;
            font-weight: 500;
            border-bottom: 1px solid #dee2e6;
        }
        .function-body {
            padding: 10px;
        }
        .table-responsive {
            margin-bottom: 20px;
            max-height: 100%;
            overflow-y: auto;
        }
        .btn-detail {
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
        }
        .setting-buttons {
            margin-bottom: 20px;
        }
        .setting-buttons .btn {
            margin-right: 10px;
        }
        .alert-icon {
            color: #dc3545;
            margin-right: 5px;
        }
        .password-container {
            position: relative;
        }
        .password-field {
            padding-right: 40px;
        }
        .password-toggle {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #6c757d;
            cursor: pointer;
        }
        .table {
            font-size: 0.875rem;
        }
        .table-fixed-header thead th {
            position: sticky;
            top: 0;
            background-color: #f8f9fa;
            z-index: 1;
        }
        .mb-3 {
            margin-bottom: 0.75rem !important;
        }
        .form-label {
            margin-bottom: 0.25rem;
        }
        #panelSettingsForm .mb-3 {
            margin-bottom: 0.5rem !important;
        }
        .tab-content {
            padding-top: 0.5rem;
        }
        .card-body {
            padding: 0.75rem;
        }
        
        /* 新增左侧菜单样式 */
        .app-container {
            display: flex; /* 恢复flex布局 */
            min-height: 100vh;
        }

        /* 左侧固定菜单 */
        .sidebar {
            width: 250px;
            background-color: #212529;
            color: white;
            overflow-y: auto;
            z-index: 1000;
            flex-shrink: 0; /* 防止侧边栏被压缩 */
        }
        .sidebar-header {
            padding: 15px;
            background-color: #0d6efd;
            text-align: center;
        }
        .sidebar-menu {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .sidebar-menu li {
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: block;
            width: 100%;
        }
        .sidebar-menu .nav-item {
            width: 100%;
        }
        .sidebar-menu .nav-link {
            color: rgba(255,255,255,0.8);
            padding: 12px 20px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            width: 100%;
            text-align: left;
            border-radius: 0;
            cursor: pointer;
        }
        .sidebar-menu .nav-link:hover,
        .sidebar-menu .nav-link.active {
            color: #fff;
            background-color: rgba(255,255,255,0.1);
        }
        .sidebar-menu .nav-link i {
            margin-right: 10px;
            font-size: 1.1rem;
        }

        /* 右侧主内容，自适应宽度 */
        .main-content {
            flex: 1; /* 自适应占满剩余空间 */
            padding: 20px;
            height: 100vh;
            overflow-y: auto;
            background-color: #f8f9fa;
        }
        .tab-pane {
            display: none;
        }
        .tab-pane.active {
            display: block;
        }
        .tab-pane.show.active {
            display: block;
        }

        /* 部署日志样式 */
        .deployment-log {
            height: 200px;
            overflow-y: auto;
            background-color: #000;
            color: #33ff33;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            padding: 10px;
            font-size: 0.85rem;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        .log-success {
            color: #33ff33;
        }
        
        .log-error {
            color: #ff5555;
        }
        
        .log-warn {
            color: #ffff55;
        }
        
        .log-info {
            color: #55aaff;
        }
        
        /* 禁用模态框蒙版，避免页面卡住 */
        .modal-backdrop {
            display: none !important;
            opacity: 0 !important;
        }
        
        /* 确保模态框内容仍然可见 */
        .modal {
            background: transparent;
        }
        
        /* 确保模态框正常工作，即使没有蒙版 */
        body.modal-open {
            overflow: auto !important;
            padding-right: 0 !important;
        }
    </style>
</head>
<body class="bg-light">
    <div class="app-container">
        <!-- 左侧菜单栏 -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h5 class="mb-0">域名管理系统</h5>
            </div>
            <ul class="sidebar-menu" id="settingsTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="domains-list-tab" data-bs-toggle="tab" data-bs-target="#domains-list-tab-pane" type="button" role="tab" aria-controls="domains-list-tab-pane" aria-selected="true">
                        <i class="bi bi-list-ul"></i> 域名列表
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="home-tab" data-bs-toggle="tab" data-bs-target="#home-tab-pane" type="button" role="tab" aria-controls="home-tab-pane" aria-selected="false">
                        <i class="bi bi-house-door"></i> 部署
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="domains-tab" data-bs-toggle="tab" data-bs-target="#domains-tab-pane" type="button" role="tab" aria-controls="domains-tab-pane" aria-selected="false">
                        <i class="bi bi-globe"></i> 域名管理
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="servers-tab" data-bs-toggle="tab" data-bs-target="#servers-tab-pane" type="button" role="tab" aria-controls="servers-tab-pane" aria-selected="false">
                        <i class="bi bi-server"></i> 服务器管理
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="certificates-tab" data-bs-toggle="tab" data-bs-target="#certificates-tab-pane" type="button" role="tab" aria-controls="certificates-tab-pane" aria-selected="false">
                        <i class="bi bi-shield-check"></i> 证书管理
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="templates-tab" data-bs-toggle="tab" data-bs-target="#templates-tab-pane" type="button" role="tab" aria-controls="templates-tab-pane" aria-selected="false">
                        <i class="bi bi-layout-text-window"></i> 模板管理
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="panel-tab" data-bs-toggle="tab" data-bs-target="#panel-tab-pane" type="button" role="tab" aria-controls="panel-tab-pane" aria-selected="false">
                        <i class="bi bi-gear"></i> 面板设置
                    </button>
                </li>
            </ul>
        </div>

        <!-- 主内容区域 -->
        <div class="main-content">
            <div class="tab-content" id="settingsTabsContent">
                <!-- 域名列表标签内容 -->
                <div class="tab-pane fade show active" id="domains-list-tab-pane" role="tabpanel" aria-labelledby="domains-list-tab" tabindex="0">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="m-0">域名列表</h5>
                        </div>
                        <div class="card-body p-0">
                            <div class="table-responsive">
                                <table class="table table-hover table-striped table-fixed-header mb-0" id="deployed-domains-table">
                                    <thead>
                                        <tr>
                                            <th>域名</th>
                                            <th>域名商</th>
                                            <th>详情</th>
                                            <th>过期时间</th>
                                            <th>证书到期时间</th>
                                            <th>服务器IP</th>
                                            <th>状态</th>
                                            <th>备注</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- 域名数据将通过JavaScript动态加载 -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 部署标签内容 -->
                <div class="tab-pane fade" id="home-tab-pane" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
                    <div class="row">
                        <!-- 左侧功能区 (占2/3宽度) -->
                        <div class="col-md-8">
                            <div class="row mb-3">
                                <!-- 域名选择区 -->
                                <div class="col-md-6">
                                    <div class="function-panel">
                                        <div class="function-header">
                                            <i class="bi bi-globe"></i> 域名设置
                                        </div>
                                        <div class="function-body">
                                            <div class="mb-3">
                                                <select class="form-select" id="domainSelect">
                                                    <!-- 域名选项将通过JavaScript动态加载 -->
                                                </select>
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <span>状态:</span>
                                                <span class="badge bg-success">已配置</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 服务器状态区 -->
                                <div class="col-md-6">
                                    <div class="function-panel">
                                        <div class="function-header">
                                            <i class="bi bi-server"></i> 服务器设置
                                        </div>
                                        <div class="function-body">
                                            <div class="mb-3">
                                                <select class="form-select" id="serverSelect">
                                                    <!-- 服务器选项将通过JavaScript动态加载 -->
                                                </select>
                                            </div>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div>
                                                    <span>Nginx状态:</span>
                                                    <span class="badge bg-danger ms-2">未安装</span>
                                                </div>
                                                <button class="btn btn-sm btn-outline-secondary refresh-status-btn" title="刷新状态">
                                                    <i class="bi bi-arrow-clockwise"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <!-- 证书状态区 -->
                                <div class="col-md-6">
                                    <div class="function-panel">
                                        <div class="function-header">
                                            <i class="bi bi-shield-check"></i> 证书设置
                                        </div>
                                        <div class="function-body">
                                            <div class="mb-3">
                                                <select class="form-select" id="certificateSelect">
                                                    <option value="">--选择证书--</option>
                                                    <!-- 证书选项将通过JavaScript动态加载 -->
                                                </select>
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <span>证书状态:</span>
                                                <span class="badge bg-danger">未安装</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 网站模板区 -->
                                <div class="col-md-6">
                                    <div class="function-panel">
                                        <div class="function-header">
                                            <i class="bi bi-layout-text-window"></i> 模板设置
                                        </div>
                                        <div class="function-body">
                                            <div class="mb-3">
                                                <select class="form-select" id="templateSelect">
                                                    <option value="">--选择模板--</option>
                                                    <!-- 模板选项将通过JavaScript动态加载 -->
                                                </select>
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <span>模板状态:</span>
                                                <span class="badge bg-secondary">未选择</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 右侧信息和操作区 (占1/3宽度) -->
                        <div class="col-md-4">
                            <!-- 信息摘要区 (占右侧3/4高度) -->
                            <div class="function-panel mb-3" style="height: 250px;">
                                <div class="function-header">
                                    <i class="bi bi-info-circle"></i> 配置信息摘要
                                </div>
                                <div class="function-body">
                                    <ul class="list-group">
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            <div>
                                                <i class="bi bi-globe"></i> <strong>域名:</strong>
                                                <span id="summaryDomain">未选择</span>
                                            </div>
                                            <span class="badge bg-danger rounded-pill">未选择</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            <div>
                                                <i class="bi bi-server"></i> <strong>服务器:</strong>
                                                <span id="summaryServer">未选择</span>
                                            </div>
                                            <span class="badge bg-danger rounded-pill">未选择</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            <div>
                                                <i class="bi bi-shield-check"></i> <strong>证书:</strong>
                                                <span id="summaryCertificate">未选择</span>
                                            </div>
                                            <span class="badge bg-danger rounded-pill">未配置</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            <div>
                                                <i class="bi bi-layout-text-window"></i> <strong>模板:</strong>
                                                <span id="summaryTemplate">未选择</span>
                                            </div>
                                            <span class="badge bg-danger rounded-pill">未配置</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            
                            <!-- 操作按钮区 (占右侧1/4高度) -->
                            <div class="function-panel">
                                <div class="function-header">
                                    <i class="bi bi-gear"></i> 操作
                                </div>
                                <div class="function-body d-grid gap-2">
                                    <button class="btn btn-primary" id="saveConfigBtn">
                                        <i class="bi bi-save"></i> 保存配置
                                    </button>
                                    <button class="btn btn-success" id="applyConfigBtn">
                                        <i class="bi bi-lightning-charge"></i> 应用到服务器
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 部署日志窗口 -->
                    <div class="row mt-4">
                        <div class="col-12">
                            <div class="function-panel">
                                <div class="function-header d-flex justify-content-between align-items-center">
                                    <div>
                                        <i class="bi bi-terminal"></i> 部署日志
                                    </div>
                                    <div>
                                        <button class="btn btn-sm btn-outline-secondary" id="clearLogBtn" title="清空日志">
                                            <i class="bi bi-trash"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-secondary ms-1" id="copyLogBtn" title="复制日志">
                                            <i class="bi bi-clipboard"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-secondary ms-1" id="toggleLogBtn">
                                            <i class="bi bi-chevron-up"></i>
                                        </button>
                                    </div>
                                </div>
                                  <div class="function-body" id="deploymentLogContainer">
                                    <div id="deploymentLog" class="deployment-log">
                                        <div class="text-center text-muted my-3">
                                            <i class="bi bi-info-circle"></i> 
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 域名管理标签内容 -->
                <div class="tab-pane fade" id="domains-tab-pane" role="tabpanel" aria-labelledby="domains-tab" tabindex="0">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">域名管理</h5>
                            <div>
                                <button class="btn btn-danger btn-sm me-2" id="deleteDomainBtn" disabled>
                                    <i class="bi bi-trash"></i> 删除所选
                                </button>
                                <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#addDomainModal">
                                    <i class="bi bi-plus-circle"></i> 添加域名
                                </button>
                            </div>
                        </div>
                        <div class="card-body p-0">
                            <div class="table-responsive">
                                <table class="table table-hover table-striped mb-0">
                                    <thead>
                                        <tr>
                                            <th width="40">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="selectAllDomains">
                                                </div>
                                            </th>
                                            <th>域名</th>
                                            <th>域名商</th>
                                            <th>过期时间</th>
                                            <th>证书到期时间</th>
                                            <th>服务器IP</th>
                                            <th>状态</th>
                                            <th>操作</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- 域名数据将通过JavaScript动态加载 -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 服务器管理标签内容 -->
                <div class="tab-pane fade" id="servers-tab-pane" role="tabpanel" aria-labelledby="servers-tab" tabindex="0">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">服务器管理</h5>
                            <div>
                                <button class="btn btn-danger btn-sm me-2" id="deleteServerBtn" disabled>
                                    <i class="bi bi-trash"></i> 删除所选
                                </button>
                                <button class="btn btn-success btn-sm" data-bs-toggle="modal" data-bs-target="#addServerModal">
                                    <i class="bi bi-plus-circle"></i> 添加服务器
                                </button>
                            </div>
                        </div>
                        <div class="card-body p-0">
                            <div class="table-responsive">
                                <table class="table table-hover table-striped mb-0">
                                    <thead>
                                        <tr>
                                            <th width="40">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="selectAllServers">
                                                </div>
                                            </th>
                                            <th>名称</th>
                                            <th>IP地址</th>
                                            <th>端口</th>
                                            <th>用户名</th>
                                            <th>认证方式</th>
                                            <th>状态</th>
                                            <th>操作</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- 服务器数据将通过JavaScript动态加载 -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 证书管理标签内容 -->
                <div class="tab-pane fade" id="certificates-tab-pane" role="tabpanel" aria-labelledby="certificates-tab" tabindex="0">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">证书管理</h5>
                            <div>
                                <button class="btn btn-danger btn-sm me-2" id="deleteCertificateBtn" disabled>
                                    <i class="bi bi-trash"></i> 删除所选
                                </button>

                            </div>
                        </div>
                        <div class="card-body p-0">
                            <div class="table-responsive">
                                <table class="table table-hover table-striped mb-0">
                                    <thead>
                                        <tr>
                                            <th width="40">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="selectAllCertificates">
                                                </div>
                                            </th>
                                            <th>域名</th>
                                            <th>服务器</th>
                                            <th>证书名称</th>
                                            <th>到期时间</th>
                                            <th>状态</th>
                                            <th>操作</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- 证书数据将通过JavaScript动态加载 -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 模板管理标签内容 -->
                <div class="tab-pane fade" id="templates-tab-pane" role="tabpanel" aria-labelledby="templates-tab" tabindex="0">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">模板管理</h5>
                            <div>
                                <button class="btn btn-danger btn-sm me-2" id="deleteTemplateBtn" disabled>
                                    <i class="bi bi-trash"></i> 删除所选
                                </button>
                                <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#addTemplateModal">
                                    <i class="bi bi-plus-circle"></i> 添加模板
                                </button>
                            </div>
                        </div>
                        <div class="card-body p-0">
                            <div class="table-responsive">
                                <table class="table table-hover table-striped mb-0">
                                    <thead>
                                        <tr>
                                            <th width="40">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="selectAllTemplates">
                                                </div>
                                            </th>
                                            <th>模板名称</th>
                                            <th>文件名</th>
                                            <th>创建时间</th>
                                            <th>大小</th>
                                            <th>操作</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- 模板数据将通过JavaScript动态加载 -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 面板设置标签内容 -->
                <div class="tab-pane fade" id="panel-tab-pane" role="tabpanel" aria-labelledby="panel-tab" tabindex="0">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">面板设置</h5>
                        </div>
                        <div class="card-body">
                            <form id="panelSettingsForm">
                                <div class="alert alert-info mb-3">
                                    <i class="bi bi-info-circle"></i>
                                    设置面板登录账号和密码，用于保护您的域名和服务器信息安全。
                                </div>
                                
                                <h6 class="mb-2 mt-3">账户设置</h6>
                                <div class="mb-3">
                                    <label for="panelUsername" class="form-label">登录账号</label>
                                    <input type="text" class="form-control" id="panelUsername" placeholder="管理员账号">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="panelPassword" class="form-label">登录密码</label>
                                    <input type="password" class="form-control" id="panelPassword" placeholder="设置安全密码">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="confirmPanelPassword" class="form-label">确认密码</label>
                                    <input type="password" class="form-control" id="confirmPanelPassword" placeholder="再次输入密码">
                                </div>
                                
                                <h6 class="mb-2 mt-3">服务器文件路径设置</h6>
                                <div class="mb-3">
                                    <label for="defaultPermissions" class="form-label">新建文件默认权限</label>
                                    <select class="form-select" id="defaultPermissions">
                                        <option value="644">644 (rw-r--r--)</option>
                                        <option value="664">664 (rw-rw-r--)</option>
                                        <option value="666">666 (rw-rw-rw-)</option>
                                        <option value="755">755 (rwxr-xr-x)</option>
                                        <option value="775" selected>775 (rwxrwxr-x)</option>
                                        <option value="777">777 (rwxrwxrwx)</option>
                                    </select>
                                    <div class="form-text">
                                        设置创建的文件和文件夹的默认权限，推荐使用775，确保Web服务器可以访问这些文件。
                                    </div>
                                </div>
                                
                                <div class="text-end">
                                    <button type="button" class="btn btn-secondary me-2" id="resetSettingsBtn">重置为默认设置</button>
                                    <button type="button" class="btn btn-primary" id="savePanelSettingsBtn">保存设置</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 域名详情模态框 -->
    <div class="modal fade" id="domainDetailModal" tabindex="-1" aria-labelledby="domainDetailModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="domainDetailModalLabel">域名详情</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">域名:</label>
                        <div id="detailDomain" class="form-control bg-light"></div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">域名商:</label>
                        <div id="detailRegistrar" class="form-control bg-light"></div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">注册网址:</label>
                        <div id="detailUrl" class="form-control bg-light"></div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">账号:</label>
                        <div class="input-group">
                            <input type="text" id="detailUsername" class="form-control bg-light" readonly value="" placeholder="**********">
                            <button class="btn btn-outline-secondary" type="button" id="showCredentialsBtn">查看</button>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">密码:</label>
                        <div class="input-group">
                            <input type="password" id="detailPassword" class="form-control bg-light" readonly value="" placeholder="**********">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 密码验证模态框 -->
    <div class="modal fade" id="passwordVerifyModal" tabindex="-1" aria-labelledby="passwordVerifyModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="passwordVerifyModalLabel">安全验证</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="securityPassword" class="form-label">请输入系统密码:</label>
                        <input type="password" class="form-control" id="securityPassword">
                        <div class="form-text text-danger" id="passwordError" style="display: none;">密码不正确</div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" id="verifyPasswordBtn">确认</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 增加域名模态框 -->
    <div class="modal fade" id="addDomainModal" tabindex="-1" aria-labelledby="addDomainModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addDomainModalLabel">增加域名</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addDomainForm">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="newDomainName" class="form-label">域名 <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="newDomainName" required placeholder="example.com">
                            </div>
                            <div class="col-md-6">
                                <label for="newDomainRegistrar" class="form-label">域名商</label>
                                <input type="text" class="form-control" id="newDomainRegistrar" placeholder="Namecheap, GoDaddy等">
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="newDomainUrl" class="form-label">域名网站地址</label>
                                <input type="text" class="form-control" id="newDomainUrl" placeholder="域名网站地址(可选)">
                            </div>
                            <div class="col-md-6">
                                <label for="newDomainExpiry" class="form-label">域名到期时间 <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="newDomainExpiry" required placeholder="例如：2024-12-31 或 2024年12月31日">
                            </div>
                        </div>
                        
                        <div class="alert alert-warning">
                            <i class="bi bi-exclamation-triangle alert-icon"></i>
                            <strong>安全提醒:</strong> 账号和密码信息将存储在本地系统中。虽然这些信息经过加密，但仍建议您使用独立的登录凭据，而非重要账户的主要密码。
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="newDomainUsername" class="form-label">域名网站登录账号</label>
                                <input type="text" class="form-control" id="newDomainUsername" placeholder="登录账号">
                            </div>
                            <div class="col-md-6">
                                <label for="newDomainPassword" class="form-label">域名网站登录密码</label>
                                <input type="password" class="form-control" id="newDomainPassword" placeholder="登录密码">
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="newDomainNote" class="form-label">备注</label>
                            <textarea class="form-control" id="newDomainNote" rows="2" placeholder="可选备注信息"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" id="saveDomainBtn">保存</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 增加服务器模态框 -->
    <div class="modal fade" id="addServerModal" tabindex="-1" aria-labelledby="addServerModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addServerModalLabel">增加服务器</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addServerForm">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="newServerName" class="form-label">服务器名称</label>
                                <input type="text" class="form-control" id="newServerName" placeholder="主服务器、测试服务器等">
                            </div>
                            <div class="col-md-6">
                                <label for="newServerIP" class="form-label">服务器IP <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="newServerIP" required placeholder="例如: 123.45.67.89">
                                <div class="form-text">
                                    必须输入有效的IPv4地址，此字段不能为空
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="newServerHostname" class="form-label">主机名</label>
                            <input type="text" class="form-control" id="newServerHostname" placeholder="服务器主机名(可选)">
                            <div class="form-text">
                                如果留空，系统将自动尝试在连接时获取服务器的主机名
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="newServerAuthType" class="form-label">认证方式</label>
                            <select class="form-select" id="newServerAuthType">
                                <option value="password">密码认证</option>
                                <option value="key">密钥认证</option>
                            </select>
                        </div>
                        
                        <div class="alert alert-warning">
                            <i class="bi bi-exclamation-triangle alert-icon"></i>
                            <strong>安全提醒:</strong> 服务器凭据是敏感信息，系统将对这些信息进行加密存储。建议使用专用的受限账号，而非root账号或管理员账号。
                        </div>
                        
                        <div class="alert alert-info">
                            <i class="bi bi-info-circle alert-icon"></i>
                            <strong>提示:</strong> 账号和密码不是必填项。如果您不提供，系统将不会自动连接到服务器，您可以稍后通过SSH手动设置。
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="newServerUsername" class="form-label">账号</label>
                                <input type="text" class="form-control" id="newServerUsername" placeholder="ssh账号(可选)">
                            </div>
                            <div class="col-md-6" id="passwordAuthFields">
                                <label for="newServerPassword" class="form-label">密码</label>
                                <input type="password" class="form-control" id="newServerPassword" placeholder="ssh密码(可选)">
                            </div>
                            <div class="col-md-6" id="keyAuthFields" style="display: none;">
                                <label for="newServerKeyFile" class="form-label">密钥文件 <span class="text-danger">*</span></label>
                                <input type="file" class="form-control" id="newServerKeyFile">
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="newServerPort" class="form-label">SSH端口</label>
                                <input type="number" class="form-control" id="newServerPort" value="22" placeholder="22">
                            </div>
                            <div class="col-md-6">
                                <label for="newServerWebRoot" class="form-label">网站根目录</label>
                                <input type="text" class="form-control" id="newServerWebRoot" placeholder="/var/www/html">
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="newServerNote" class="form-label">备注</label>
                            <textarea class="form-control" id="newServerNote" rows="2" placeholder="可选备注信息"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" id="saveServerBtn">保存</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 添加模板模态框 -->
    <div class="modal fade" id="addTemplateModal" tabindex="-1" aria-labelledby="addTemplateModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addTemplateModalLabel">添加模板</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addTemplateForm">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="newTemplateName" class="form-label">模板名称 <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="newTemplateName" required placeholder="例如：企业网站模板">
                            </div>
                            <div class="col-md-6">
                                <label for="newTemplateFilename" class="form-label">文件名 <span class="text-danger">*</span></label>
                                <div class="input-group">
                                    <input type="text" class="form-control" id="newTemplateFilename" required placeholder="例如：business">
                                    <span class="input-group-text">.html</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="newTemplateContent" class="form-label">模板内容 <span class="text-danger">*</span></label>
                            <textarea class="form-control" id="newTemplateContent" rows="15" required placeholder="输入HTML模板内容"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" id="saveTemplateBtn">保存</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 查看模板模态框 -->
    <div class="modal fade" id="viewTemplateModal" tabindex="-1" aria-labelledby="viewTemplateModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="viewTemplateModalLabel">查看模板</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">模板名称:</label>
                        <div id="viewTemplateName" class="form-control bg-light"></div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">文件名:</label>
                        <div id="viewTemplateFilename" class="form-control bg-light"></div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">模板内容:</label>
                        <pre id="viewTemplateContent" class="form-control bg-light" style="min-height: 300px; white-space: pre-wrap;"></pre>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 服务器详情模态框 -->
    <div class="modal fade" id="serverDetailModal" tabindex="-1" aria-labelledby="serverDetailModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="serverDetailModalLabel">服务器详情</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">服务器名称:</label>
                        <div id="detailServerName" class="form-control bg-light"></div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">IP地址:</label>
                        <div class="input-group">
                            <div id="detailServerIP" class="form-control bg-light"></div>
                            <button class="btn btn-info btn-sm" id="testServerIPBtn" type="button">测试连接</button>
                        </div>
                        <div id="ipTestResult" class="mt-2" style="display: none;"></div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">主机名:</label>
                        <div id="detailServerHostname" class="form-control bg-light"></div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">SSH端口:</label>
                        <div id="detailServerPort" class="form-control bg-light"></div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">用户名:</label>
                        <div id="detailServerUsername" class="form-control bg-light"></div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">认证方式:</label>
                        <div id="detailServerAuthType" class="form-control bg-light"></div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">网站根目录:</label>
                        <div id="detailServerWebroot" class="form-control bg-light"></div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">备注:</label>
                        <div id="detailServerNotes" class="form-control bg-light"></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                    <button type="button" class="btn btn-warning" id="editServerBtn">编辑</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 编辑服务器模态框 -->
    <div class="modal fade" id="editServerModal" tabindex="-1" aria-labelledby="editServerModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editServerModalLabel">编辑服务器</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editServerForm">
                        <input type="hidden" id="editServerId">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="editServerName" class="form-label">服务器名称</label>
                                <input type="text" class="form-control" id="editServerName" placeholder="主服务器、测试服务器等">
                            </div>
                            <div class="col-md-6">
                                <label for="editServerIP" class="form-label">服务器IP <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="editServerIP" required placeholder="例如: 123.45.67.89">
                                <div class="form-text">
                                    必须输入有效的IPv4地址，此字段不能为空
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="editServerHostname" class="form-label">主机名</label>
                            <input type="text" class="form-control" id="editServerHostname" placeholder="服务器主机名(可选)">
                            <div class="form-text">
                                如果留空，系统将自动尝试在连接时获取服务器的主机名
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="editServerAuthType" class="form-label">认证方式</label>
                            <select class="form-select" id="editServerAuthType">
                                <option value="password">密码认证</option>
                                <option value="key">密钥认证</option>
                            </select>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="editServerUsername" class="form-label">账号</label>
                                <input type="text" class="form-control" id="editServerUsername" placeholder="ssh账号">
                            </div>
                            <div class="col-md-6" id="editPasswordAuthFields">
                                <label for="editServerPassword" class="form-label">密码</label>
                                <input type="password" class="form-control" id="editServerPassword" placeholder="留空表示保持原密码不变">
                                <div class="form-text">如不修改密码请留空</div>
                            </div>
                            <div class="col-md-6" id="editKeyAuthFields" style="display: none;">
                                <label for="editServerKeyFile" class="form-label">密钥文件</label>
                                <input type="file" class="form-control" id="editServerKeyFile">
                                <div class="form-text">如不修改密钥请不要上传新文件</div>
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="editServerPort" class="form-label">SSH端口</label>
                                <input type="number" class="form-control" id="editServerPort" placeholder="22">
                            </div>
                            <div class="col-md-6">
                                <label for="editServerWebRoot" class="form-label">网站根目录</label>
                                <input type="text" class="form-control" id="editServerWebRoot" placeholder="/var/www/html">
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="editServerNote" class="form-label">备注</label>
                            <textarea class="form-control" id="editServerNote" rows="2" placeholder="可选备注信息"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" id="updateServerBtn">保存更改</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="js/main.js"></script>
</body>
</html>